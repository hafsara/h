          <ng-template let-value pTemplate="item">
            <span class="chip" [ngClass]="entryByValue(value)?.status">
              {{ value }}
              <i *ngIf="entryByValue(value)?.status === 'valid'"></i>
              <i *ngIf="entryByValue(value)?.status === 'invalid'"></i>
              <span *ngIf="entryByValue(value)?.status === 'pending'" class="chip-spinner">
                <p-progressSpinner [style]="{width:'12px',height:'12px'}" strokeWidth="8"></p-progressSpinner>
              </span>
            </span>
          </ng-template>




  entryByValue(v: string): TokenEntry | undefined {
    return this.tokens.find(t => t.value === v);
  }


/* 1) Neutraliser le wrapper PrimeNG */
:host ::ng-deep .p-chips .p-chips-token {
  background: transparent !important;
}


/* 3) Ton chip complet (texte + statut + bouton remove) */
.chip {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .25rem .5rem .25rem .5rem;
  border-radius: 999px;
  font-size: .9rem;
  line-height: 1;

  &.valid   { background-color: #d4edda; color: #155724; }
  &.invalid { background-color: #f8d7da; color: #721c24; }
  &.pending { background-color: #e2e3e5; color: #383d41; }
}

.chip-status { font-size: .8rem; line-height: 1; }

/* 4) Bouton remove intégré dans la pilule */
.chip-remove {
  appearance: none;
  border: 0;
  background: transparent;
  cursor: pointer;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  opacity: .75;
}
.chip-remove:hover { opacity: 1; }

.chip-spinner { display: inline-flex; }
